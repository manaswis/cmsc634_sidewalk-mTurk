# this terminal command will query the sidewalk database and output the turker_label_data.csv file in your current dir, copy into cmsc634_sidewalk-mTurk/data
# Columns in the CSV: lng, lat, label type, mturk assignment ID, turker ID, route id

psql -d sidewalk -t -A -F"," -c "SELECT sidewalk.label_point.lng, sidewalk.label_point.lat, sidewalk.label_type.label_type, sidewalk.amt_assignment.amt_assignment_id, sidewalk.amt_assignment.turker_id, sidewalk.amt_assignment.route_id FROM sidewalk.label INNER JOIN sidewalk.audit_task  ON sidewalk.label.audit_task_id = sidewalk.audit_task.audit_task_id INNER JOIN sidewalk.label_point  ON sidewalk.label.label_id = sidewalk.label_point.label_id INNER JOIN sidewalk.label_type  ON sidewalk.label.label_type_id = sidewalk.label_type.label_type_id INNER JOIN sidewalk.amt_assignment ON sidewalk.audit_task.amt_assignment_id = sidewalk.amt_assignment.amt_assignment_id WHERE (sidewalk.label.deleted = false) AND (sidewalk.amt_assignment.completed = true)" > labels-turker.csv
